<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Gigante 3D</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/grid-tres.css">
        <link rel="stylesheet" href="../css/biblioteca.css"> 
</head>
<body>
    <div class="bubbles">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div>
    </div>
    
    <div class="main-scene">
        <div class="flipper-object" id="libro-gigante">
            
            <div class="scene-face face-front">
                <h2 class="section-title">üìö Biblioteca Gigante</h2>

                <div style="display:flex; justify-content:center; width:100%;">
                    <input type="text" id="buscador" onkeyup="buscarCuento()" placeholder="üîç Buscar un cuento..." 
                    style="padding: 15px; border-radius: 50px; border: none; width: 100%; max-width: 500px; margin-bottom: 30px; text-align: center; font-family: 'Fredoka'; outline:none;">
                </div>

                <div class="grid-3-cols">
                    <div class="card-item" onclick="abrirCuento('cerditos')">
                        <div class="icon">üê∑</div>
                        <h3>Los 3 Cerditos</h3>
                        <p>Cl√°sico</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('caperucita')">
                        <div class="icon">üê∫</div>
                        <h3>Caperucita</h3>
                        <p>Aventura</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('pinocho')">
                        <div class="icon">ü§•</div>
                        <h3>Pinocho</h3>
                        <p>Fantas√≠a</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('patito_feo')">
                        <div class="icon">ü¶Ü</div>
                        <h3>El Patito Feo</h3>
                        <p>Autoestima</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('tortuga_liebre')">
                        <div class="icon">üê¢</div>
                        <h3>La Tortuga</h3>
                        <p>F√°bula</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('ricitos')">
                        <div class="icon">üëß</div>
                        <h3>Ricitos de Oro</h3>
                        <p>Curiosidad</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('hansel_gretel')">
                        <div class="icon">üç≠</div>
                        <h3>Hansel y Gretel</h3>
                        <p>Hermanos</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('leon_raton')">
                        <div class="icon">ü¶Å</div>
                        <h3>El Le√≥n y Rat√≥n</h3>
                        <p>Amistad</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('cenicienta')">
                        <div class="icon">üë†</div>
                        <h3>La Cenicienta</h3>
                        <p>Princesas</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('blancanieves')">
                        <div class="icon">üçé</div>
                        <h3>Blancanieves</h3>
                        <p>Princesas</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('cigarra_hormiga')">
                        <div class="icon">üêú</div>
                        <h3>Cigarra y Hormiga</h3>
                        <p>Esfuerzo</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('gato_botas')">
                        <div class="icon">üë¢</div>
                        <h3>Gato con Botas</h3>
                        <p>Ingenio</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('peter_pan')">
                        <div class="icon">üßö</div>
                        <h3>Peter Pan</h3>
                        <p>Fantas√≠a</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('lechera')">
                        <div class="icon">ü•õ</div>
                        <h3>La Lechera</h3>
                        <p>Atenci√≥n</p>
                    </div>

                    <div class="card-item" onclick="abrirCuento('juan_habichuelas')">
                        <div class="icon">üå±</div>
                        <h3>Juan y Frijoles</h3>
                        <p>Aventura</p>
                    </div>  
                    
                    <div class="card-item" style="opacity: 0.5;">
                        <div class="icon">üîí</div>
                        <h3>Pr√≥ximamente</h3>
                        <p>M√°s cuentos...</p>
                    </div>   
                    
                </div>

                <div class="center-btn">
                    <a href="cuentos.html" class="back-link">
                        <span>‚¨Ö Volver a Cuentos</span>
                    </a>
</div>
                
            </div>

            <div class="scene-face face-back" id="fondo-lector">
                <button class="close-btn" onclick="cerrarCuento()">‚úñ Cerrar Libro</button>
                
                <div class="reader-container">
                    <div id="lector-icono" style="font-size: 4rem; text-align: center;">üìñ</div>
                    <h1 id="lector-titulo" style="text-align: center; color: #333;">T√≠tulo</h1>
                    <hr style="border: 0; border-top: 2px solid #eee; margin: 20px 0;">
                    <div id="lector-texto" style="text-align: justify; line-height: 1.8; font-size: 1.1rem; color: #444;">
                        Cargando historia...
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="../js/datos_cuentos.js"></script> 

    <script>
        // --- 1. DATOS DE EJEMPLO (Por si no carga tu archivo externo a√∫n) ---
        // Si ya tienes datos_cuentos.js funcionando, puedes borrar este bloque 'const cuentosData...'
        const datosEjemplo = {
            'cerditos': {
                titulo: "Los Tres Cerditos",
                texto: "<p>Hab√≠a una vez tres cerditos que viv√≠an al aire libre cerca del bosque...</p><p>El lobo sopl√≥ y sopl√≥...</p>",
                icono: "üê∑",
                colorFondo: "#ffebee" // Un rosita claro
            },
            'caperucita': {
                titulo: "Caperucita Roja",
                texto: "<p>√ârase una vez una ni√±a muy bonita. Su madre le hab√≠a hecho una capa roja...</p>",
                icono: "üê∫",
                colorFondo: "#ffebee"
            },
            'pinocho': {
                titulo: "Pinocho",
                texto: "<p>Gepetto, el carpintero, fabric√≥ un mu√±eco de madera...</p>",
                icono: "ü§•",
                colorFondo: "#e3f2fd"
            }
        };

        // --- 2. L√ìGICA DEL GIRO ---
        
        function abrirCuento(id) {
            // Intenta usar tu archivo externo 'cuentosData', si no existe usa 'datosEjemplo'
            const data = (typeof cuentosData !== 'undefined') ? cuentosData[id] : datosEjemplo[id];
            
            if (data) {
                // Rellenar la Cara Trasera con la info
                document.getElementById('lector-titulo').innerText = data.titulo;
                document.getElementById('lector-texto').innerHTML = data.texto; // innerHTML permite p√°rrafos <p>
                document.getElementById('lector-icono').innerText = data.icono || "üìñ";
                
                // Opcional: Cambiar color de fondo de la cara trasera
                document.getElementById('fondo-lector').style.backgroundColor = data.colorFondo || "#fdfbf7";

                // ACTIVAR EL GIRO
                document.getElementById('libro-gigante').classList.add('is-flipped');
            } else {
                alert("Este cuento a√∫n no est√° escrito üò¢");
            }
        }

        function cerrarCuento() {
            // DESACTIVAR EL GIRO (Vuelve al frente)
            document.getElementById('libro-gigante').classList.remove('is-flipped');
            
            // Opcional: Resetear el scroll del lector para la pr√≥xima vez
            setTimeout(() => {
                document.querySelector('.face-back').scrollTop = 0;
            }, 800); // Espera a que termine la animaci√≥n
        }

        // --- 3. TU BUSCADOR (Mantenido) ---
        function buscarCuento() {
            var input = document.getElementById("buscador");
            var filtro = input.value.toUpperCase();
            var contenedor = document.querySelector(".grid-3-cols");
            var tarjetas = contenedor.getElementsByClassName("card-item");

            for (var i = 0; i < tarjetas.length; i++) {
                var titulo = tarjetas[i].getElementsByTagName("h3")[0];
                if (titulo) {
                    var textoTitulo = titulo.textContent || titulo.innerText;
                    if (textoTitulo.toUpperCase().indexOf(filtro) > -1) {
                        tarjetas[i].style.display = "";
                    } else {
                        tarjetas[i].style.display = "none";
                    }
                }
            }
        }
    </script>
</body>
</html>